# 1 TCP协议

面向连接协议。

客户向服务端发送请求，服务端需要响应客户端才能建立连接。

## 1.1 步骤

TCP与UDP不同，TCP严格区分客户端和服务端，即所创建的对象不同。

**客户端步骤**：

1、创建【Socket】对象，指定连接的服务端IP和端口。

2、通过【Socket】获取传输数据的流对象。

调用方法【getOutputStream()】，获取【OutputStream】。

调用方法【getInputStream()】，获取【InputStream】。

<font color=red>**注意**</font>：此处的输入流和输出流不再关联文件，而是关联服务端：

- 输出流：向服务端发送数据。
- 输入流：从服务端读取数据。

3、通过流对象收发数据。

4、释放资源。

**服务端步骤**：

1、创建【ServerSocket】对象，指定端口号。

2、调用【accpet()】响应客户端的请求，响应成功返回【Socket】对象。

3、通过这个【Socket】获取传输数据的流：

这里的流关联的是客户端：

- 输出流：向客户端发送数据。
- 输入流：从客户端读取数据。

4、通过流对象收发数据。

5、释放资源。

## 1.2 演示

首先是客户端，创建【Socket】指定连接的IP和端口：

![image-20240923195853452](assets/image-20240923195853452.png)

创建流对象：

![image-20240923200136126](assets/image-20240923200136126.png)

向服务端写入数据：

![image-20240923200244796](assets/image-20240923200244796.png)

然后是服务端：

创建【SocketServer】，指定端口：

![image-20240923200449237](assets/image-20240923200449237.png)

响应客户端的请求：

![image-20240923200559588](assets/image-20240923200559588.png)

获取流对象：

![image-20240923200946959](assets/image-20240923200946959.png)

读取客户端发送的数据：

![image-20240923202559931](assets/image-20240923202559931.png)

向客户端写入数据：

![image-20240923202617381](assets/image-20240923202617381.png)

关闭资源：

【socket.close()】是关闭客户端连接，【socketServer.close()】是关闭服务器。

客户端读取服务端发送的数据：

![image-20240923202749166](assets/image-20240923202749166.png)

关闭资源；

![image-20240923202802501](assets/image-20240923202802501.png)

效果：

![动画](assets/动画-1727094607354-5.gif)

服务端通过【socket】调用【getInetAddress()】可以拿到客户端的IP对象：

![image-20240923203158557](assets/image-20240923203158557.png)

![image-20240923203307011](assets/image-20240923203307011.png)